FancypageApp.module("Dashboard.Models",function(a,b,c){"use strict";a.Page=c.Model.extend({idAttribute:"uuid",defaults:{uuid:null,name:null,url:null,status:null,isVisible:!1,children:[]},initialize:function(){this.set("children",new a.Pages(this.get("children")))},move:function(a){return this.save(a,{url:this.url()+"/move"})},url:function(){return b.Api.baseUrl+"/page/"+this.id}}),a.Pages=c.Collection.extend({model:a.Page,url:b.Api.baseUrl+"/pages"})}),FancypageApp.module("Dashboard.Views",function(a,b,c,d,e){"use strict";var f=b.Dashboard.Models;a.PageNode=d.CompositeView.extend({tagName:"li",itemViewContainer:"ol",template:"#template-page-node",events:{"hide [id$=-tree]":"hideChildren","show [id$=-tree]":"showChildren"},initialize:function(){this.create,this.collection=this.model.get("children")},hideChildren:function(){var a=e("[data-target=#"+this.model.id+"-tree]>i");a.removeClass("icon-caret-down"),a.addClass("icon-caret-right")},showChildren:function(){var a=e("[data-target=#"+this.model.id+"-tree]>i");a.removeClass("icon-caret-right"),a.addClass("icon-caret-down")},onCompositeModelRendered:function(){if(this.$el.attr("data-index",this.model.collection.indexOf(this.model)),this.$el.attr("data-page-id",this.model.id),null!==this.model.get("parent")){var a=this.model.get("parent")+"-tree";this.$el.attr("id",a),this.$el.addClass("collapse")}}}),a.PageTree=d.CollectionView.extend({el:"ol.fp-page-tree",itemView:a.PageNode,initialize:function(){this.sortable=this.$el.sortable({placeholder:'<li class="placeholder">Insert here!</li>',onDrop:this.saveMovedPage})},saveMovedPage:function(a,c,d){d(a,c);var g=c.$getChildren(c.el,"item"),h=g.index(a),i=a.data("index"),j=new f.Page({uuid:a.data("page-id")}),k=j.move({parent:e(c.el).data("parent-id"),new_index:h,old_index:i});k.complete(b.Api.reloadPage)}})});
//# sourceMappingURL=dashboard.min.js.map